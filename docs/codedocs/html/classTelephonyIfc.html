<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>TelephonyIfc Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>TelephonyIfc Class Reference</h1><!-- doxytag: class="TelephonyIfc" -->This class is the interface between telekarama and the Opal telephony library.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="telephony_8h-source.html">telephony.h</a>&gt;</code>
<p>
<div class="dynheader">
Collaboration diagram for TelephonyIfc:</div>
<div class="dynsection">
<p><center><img src="classTelephonyIfc__coll__graph.png" border="0" usemap="#TelephonyIfc__coll__map" alt="Collaboration graph"></center>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center></div>

<p>
<a href="classTelephonyIfc-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTelephonyIfc.html#f9e1672e2302bd86c082070db8cf9b9f">Initialise</a> (const PString &amp;stunAddr, const PString &amp;user)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set up the <a class="el" href="classTelephonyIfc.html" title="This class is the interface between telekarama and the Opal telephony library.">TelephonyIfc</a> class.  <a href="#f9e1672e2302bd86c082070db8cf9b9f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTelephonyIfc.html#ddbfc63168d5e70fd4f83469de4aabb7">Register</a> (const PString &amp;registrar, const PString &amp;user, const PString &amp;passwd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Register with a service provided.  <a href="#ddbfc63168d5e70fd4f83469de4aabb7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="20e9a9dd2df97b6c50aa1e19191c890a"></a><!-- doxytag: member="TelephonyIfc::IsRegistered" ref="20e9a9dd2df97b6c50aa1e19191c890a" args="()" -->
PBoolean&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTelephonyIfc.html#20e9a9dd2df97b6c50aa1e19191c890a">IsRegistered</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Indicates whether the user is registered with a SIP provider. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="957da4a7936c3672a48f0fa93f655676"></a><!-- doxytag: member="TelephonyIfc::Unregister" ref="957da4a7936c3672a48f0fa93f655676" args="()" -->
PBoolean&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTelephonyIfc.html#957da4a7936c3672a48f0fa93f655676">Unregister</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Unregister from the current SIP provider. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">PBoolean&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTelephonyIfc.html#4acdd44e7af7967ed53cdf9d47dc0c27">IsRecording</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTelephonyIfc.html#2cd8176d99232038fbe8718417135b07">StartRecording</a> (const PString &amp;fname)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Begin recording the current call.  <a href="#2cd8176d99232038fbe8718417135b07"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="14352867be8fe5f0fcf501701e9052b2"></a><!-- doxytag: member="TelephonyIfc::StopRecording" ref="14352867be8fe5f0fcf501701e9052b2" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTelephonyIfc.html#14352867be8fe5f0fcf501701e9052b2">StopRecording</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Stop recording the current call. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTelephonyIfc.html#60cba0b92e2f33357c063c251fae2997">ToneReceived</a> (char key, bool clear=true)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Determines whether a DTMF tone has been received.  <a href="#60cba0b92e2f33357c063c251fae2997"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTelephonyIfc.html#ac6179d75a2c623e05ccb345b45741f1">SendTone</a> (const char tone)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Send a DTMF tone to the remote party if connected.  <a href="#ac6179d75a2c623e05ccb345b45741f1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTelephonyIfc.html#2e0adbafa63cd9c07a1c1c6ce68bf933">Dial</a> (const PString &amp;ostr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initiate a new call.  <a href="#2e0adbafa63cd9c07a1c1c6ce68bf933"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="074e1d67c95ce1e66d346bb7315d5dcd"></a><!-- doxytag: member="TelephonyIfc::IsDialing" ref="074e1d67c95ce1e66d346bb7315d5dcd" args="()" -->
PBoolean&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTelephonyIfc.html#074e1d67c95ce1e66d346bb7315d5dcd">IsDialing</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Determines whether there is a call being dialed, but not yet connected. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTelephonyIfc.html#a482ebd5daf3bf5d69ec40a46a0616e9">OnEstablishedCall</a> (OpalCall &amp;call)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Callback invoked when call has been established.  <a href="#a482ebd5daf3bf5d69ec40a46a0616e9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="2a68749063e9e0c45ac31e8e44fa0849"></a><!-- doxytag: member="TelephonyIfc::IsConnected" ref="2a68749063e9e0c45ac31e8e44fa0849" args="()" -->
PBoolean&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTelephonyIfc.html#2a68749063e9e0c45ac31e8e44fa0849">IsConnected</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Determines whether there is a connected call. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTelephonyIfc.html#68160576582be102ace0f4ae277d7129">Disconnect</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Disconnect the current call if it exists.  <a href="#68160576582be102ace0f4ae277d7129"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTelephonyIfc.html#7efa2a51fd26f3c5072ee8b7ba09d75c">OnClearedCall</a> (OpalCall &amp;call)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Callback invoked when call has been disconnected.  <a href="#7efa2a51fd26f3c5072ee8b7ba09d75c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="d5e6a50893f0915064f23c8d50de481f"></a><!-- doxytag: member="TelephonyIfc::DisconnectReason" ref="d5e6a50893f0915064f23c8d50de481f" args="()" -->
PString&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTelephonyIfc.html#d5e6a50893f0915064f23c8d50de481f">DisconnectReason</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns a human-friendly description of the reason a call ended or NULL. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">PBoolean&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTelephonyIfc.html#f3a2ff3766cf45c203dba5a2260445b1">OnOpenMediaStream</a> (OpalConnection &amp;connection, OpalMediaStream &amp;stream)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Callback invoked when a media stream is opened for reading or playing.  <a href="#f3a2ff3766cf45c203dba5a2260445b1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTelephonyIfc.html#085ab0d59a990bda8b17cb56b1baaeb1">OnUserInputTone</a> (OpalConnection &amp;connection, char tone, int duration)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Callback invoked when DTMF tone is detected.  <a href="#085ab0d59a990bda8b17cb56b1baaeb1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="c471d58342002859cc9a59b1d1e494ca"></a><!-- doxytag: member="TelephonyIfc::ClearTones" ref="c471d58342002859cc9a59b1d1e494ca" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTelephonyIfc.html#c471d58342002859cc9a59b1d1e494ca">ClearTones</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Clears the array that holds a record of unique tones received since the last time the array was cleared. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">PBoolean&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTelephonyIfc.html#1138529389af3b4712bd11fadd4836ca">PlayWAV</a> (const PString &amp;path, int repeat=0, int delay=0)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Transmit a WAV file to the remote party.  <a href="#1138529389af3b4712bd11fadd4836ca"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="6bf03dc65c5128fc1b7c299a6e40740f"></a><!-- doxytag: member="TelephonyIfc::StopWAV" ref="6bf03dc65c5128fc1b7c299a6e40740f" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTelephonyIfc.html#6bf03dc65c5128fc1b7c299a6e40740f">StopWAV</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Stop the WAV file that is currently playing. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a471fa455406339841ed30bddedb7dab"></a><!-- doxytag: member="TelephonyIfc::IsPlayingWav" ref="a471fa455406339841ed30bddedb7dab" args="()" -->
PBoolean&nbsp;</td><td class="memItemRight" valign="bottom"><b>IsPlayingWav</b> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="e5318586774b3cae6afd9bd3596ac0a6"></a><!-- doxytag: member="TelephonyIfc::Retrieve" ref="e5318586774b3cae6afd9bd3596ac0a6" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTelephonyIfc.html#e5318586774b3cae6afd9bd3596ac0a6">Retrieve</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieve the call from any form of IVR mode. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="9c7068e7f0ef2d4498272b4a20361d4c"></a><!-- doxytag: member="TelephonyIfc::SetMicVolume" ref="9c7068e7f0ef2d4498272b4a20361d4c" args="(unsigned int gain)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTelephonyIfc.html#9c7068e7f0ef2d4498272b4a20361d4c">SetMicVolume</a> (unsigned int gain)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the gain (volume) of the microphone. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="8cf9b680409dfad0e8453a93b1057af2"></a><!-- doxytag: member="TelephonyIfc::SetSpeakerVolume" ref="8cf9b680409dfad0e8453a93b1057af2" args="(unsigned int gain)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTelephonyIfc.html#8cf9b680409dfad0e8453a93b1057af2">SetSpeakerVolume</a> (unsigned int gain)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the gain (volume) of the pc's speakers or other sound output device. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4b81a2cfb03620cd829e8da73dfe0ea4"></a><!-- doxytag: member="TelephonyIfc::TurnOffMicrophone" ref="4b81a2cfb03620cd829e8da73dfe0ea4" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTelephonyIfc.html#4b81a2cfb03620cd829e8da73dfe0ea4">TurnOffMicrophone</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Block all microphone input. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="d5ecca9d510408b2ce43cb5b5071b357"></a><!-- doxytag: member="TelephonyIfc::TurnOnMicrophone" ref="d5ecca9d510408b2ce43cb5b5071b357" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTelephonyIfc.html#d5ecca9d510408b2ce43cb5b5071b357">TurnOnMicrophone</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Un-Block all microphone input. <br></td></tr>
<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="95f4177c87b299ab8dd0a2a13a319e0e"></a><!-- doxytag: member="TelephonyIfc::OnAudioFileSent" ref="95f4177c87b299ab8dd0a2a13a319e0e" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>OnAudioFileSent</b> ()</td></tr>

<tr><td colspan="2"><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="3541fbc8e53e233226678ef3033b591f"></a><!-- doxytag: member="TelephonyIfc::callToken" ref="3541fbc8e53e233226678ef3033b591f" args="" -->
PString&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTelephonyIfc.html#3541fbc8e53e233226678ef3033b591f">callToken</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Call token for the connection from telekarama to the remote party. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="86cd9e4c5ffe313c8aa4b73b02a02a47"></a><!-- doxytag: member="TelephonyIfc::pcToken" ref="86cd9e4c5ffe313c8aa4b73b02a02a47" args="" -->
PString&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTelephonyIfc.html#86cd9e4c5ffe313c8aa4b73b02a02a47">pcToken</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Call token for the connection from telekarama to the PC sound system. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="54799c28302aba6f7adb8c8ef438503e"></a><!-- doxytag: member="TelephonyIfc::wavToken" ref="54799c28302aba6f7adb8c8ef438503e" args="" -->
PString&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTelephonyIfc.html#54799c28302aba6f7adb8c8ef438503e">wavToken</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Call token used to reference the WAV file that is currently playing. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="616675027eef53f520b9ac96b81a56b0"></a><!-- doxytag: member="TelephonyIfc::recordToken" ref="616675027eef53f520b9ac96b81a56b0" args="" -->
PString&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTelephonyIfc.html#616675027eef53f520b9ac96b81a56b0">recordToken</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Call token for the connection from telekarma to the recording device. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="b4e274c6a138a5e08ead646eda38613e"></a><!-- doxytag: member="TelephonyIfc::aor" ref="b4e274c6a138a5e08ead646eda38613e" args="" -->
PString&nbsp;</td><td class="memItemRight" valign="bottom"><b>aor</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="0ffb35f802c55694b5729e5bde971483"></a><!-- doxytag: member="TelephonyIfc::dialing" ref="0ffb35f802c55694b5729e5bde971483" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTelephonyIfc.html#0ffb35f802c55694b5729e5bde971483">dialing</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">PTrue if telekarma is dialing a remote party otherwise PFalse. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="377903745950f7376b919c2a4456debd"></a><!-- doxytag: member="TelephonyIfc::ivrMode" ref="377903745950f7376b919c2a4456debd" args="" -->
PBoolean&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTelephonyIfc.html#377903745950f7376b919c2a4456debd">ivrMode</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">PTrue if telekarma is in IVR mode otherwise PFalse. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="f41ebe765b20a522ebd9c493c3bf77eb"></a><!-- doxytag: member="TelephonyIfc::why" ref="f41ebe765b20a522ebd9c493c3bf77eb" args="" -->
PString&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTelephonyIfc.html#f41ebe765b20a522ebd9c493c3bf77eb">why</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Describes why call was disconnected. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="8c18969f7ee88659b8b118c530f79bcd"></a><!-- doxytag: member="TelephonyIfc::tones" ref="8c18969f7ee88659b8b118c530f79bcd" args="[DTMF_TONE_MAX]" -->
char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTelephonyIfc.html#8c18969f7ee88659b8b118c530f79bcd">tones</a> [DTMF_TONE_MAX]</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Queue of tones pressed by the remote user. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="b857d1530a322453a8788c9bffbcc833"></a><!-- doxytag: member="TelephonyIfc::nextTone" ref="b857d1530a322453a8788c9bffbcc833" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>nextTone</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="692107ad53586332c50b34ea3b51f76d"></a><!-- doxytag: member="TelephonyIfc::pcssEP" ref="692107ad53586332c50b34ea3b51f76d" args="" -->
TkPCSSEndPoint *&nbsp;</td><td class="memItemRight" valign="bottom"><b>pcssEP</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="67fb79d2bcec4cc072421a5b4c2f4e16"></a><!-- doxytag: member="TelephonyIfc::sipEP" ref="67fb79d2bcec4cc072421a5b4c2f4e16" args="" -->
SIPEndPoint *&nbsp;</td><td class="memItemRight" valign="bottom"><b>sipEP</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="022bae204ef5d791f5ea8184a1928fb9"></a><!-- doxytag: member="TelephonyIfc::ivrEP" ref="022bae204ef5d791f5ea8184a1928fb9" args="" -->
OpalIVREndPoint *&nbsp;</td><td class="memItemRight" valign="bottom"><b>ivrEP</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="f15ba6ddee44e5a1908044ba8a83eaa3"></a><!-- doxytag: member="TelephonyIfc::mixerEP" ref="f15ba6ddee44e5a1908044ba8a83eaa3" args="" -->
OpalMixerEndPoint *&nbsp;</td><td class="memItemRight" valign="bottom"><b>mixerEP</b></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This class is the interface between telekarama and the Opal telephony library. <hr><h2>Member Function Documentation</h2>
<a class="anchor" name="2e0adbafa63cd9c07a1c1c6ce68bf933"></a><!-- doxytag: member="TelephonyIfc::Dial" ref="2e0adbafa63cd9c07a1c1c6ce68bf933" args="(const PString &amp;ostr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TelephonyIfc::Dial           </td>
          <td>(</td>
          <td class="paramtype">const PString &amp;&nbsp;</td>
          <td class="paramname"> <em>ostr</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initiate a new call. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ostr</em>&nbsp;</td><td>URL representing the party to call in the form of [proto:][alias@][transport$]address[:port] Here is an example using the SIP protocol: sip:<a href="mailto:telekarma@uoregon.edu">telekarma@uoregon.edu</a> </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="68160576582be102ace0f4ae277d7129"></a><!-- doxytag: member="TelephonyIfc::Disconnect" ref="68160576582be102ace0f4ae277d7129" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TelephonyIfc::Disconnect           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Disconnect the current call if it exists. 
<p>
Disconnect the call currently in progress. 
</div>
</div><p>
<a class="anchor" name="f9e1672e2302bd86c082070db8cf9b9f"></a><!-- doxytag: member="TelephonyIfc::Initialise" ref="f9e1672e2302bd86c082070db8cf9b9f" args="(const PString &amp;stunAddr, const PString &amp;user)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TelephonyIfc::Initialise           </td>
          <td>(</td>
          <td class="paramtype">const PString &amp;&nbsp;</td>
          <td class="paramname"> <em>stunAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const PString &amp;&nbsp;</td>
          <td class="paramname"> <em>user</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set up the <a class="el" href="classTelephonyIfc.html" title="This class is the interface between telekarama and the Opal telephony library.">TelephonyIfc</a> class. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>stunAddr</em>&nbsp;</td><td>Address for the stun server (e.g. stun.ekiga.net) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>user</em>&nbsp;</td><td>The username that is used to authenticate with the registrar that will be used </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="4acdd44e7af7967ed53cdf9d47dc0c27"></a><!-- doxytag: member="TelephonyIfc::IsRecording" ref="4acdd44e7af7967ed53cdf9d47dc0c27" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PBoolean TelephonyIfc::IsRecording           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>PTrue if the current call is being recorded <p>
PFalse if the current call is not being recorded </dd></dl>

</div>
</div><p>
<a class="anchor" name="7efa2a51fd26f3c5072ee8b7ba09d75c"></a><!-- doxytag: member="TelephonyIfc::OnClearedCall" ref="7efa2a51fd26f3c5072ee8b7ba09d75c" args="(OpalCall &amp;call)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TelephonyIfc::OnClearedCall           </td>
          <td>(</td>
          <td class="paramtype">OpalCall &amp;&nbsp;</td>
          <td class="paramname"> <em>call</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Callback invoked when call has been disconnected. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>call</em>&nbsp;</td><td>The call that has been cleared </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="a482ebd5daf3bf5d69ec40a46a0616e9"></a><!-- doxytag: member="TelephonyIfc::OnEstablishedCall" ref="a482ebd5daf3bf5d69ec40a46a0616e9" args="(OpalCall &amp;call)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TelephonyIfc::OnEstablishedCall           </td>
          <td>(</td>
          <td class="paramtype">OpalCall &amp;&nbsp;</td>
          <td class="paramname"> <em>call</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Callback invoked when call has been established. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>call</em>&nbsp;</td><td>The call that has been established. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="f3a2ff3766cf45c203dba5a2260445b1"></a><!-- doxytag: member="TelephonyIfc::OnOpenMediaStream" ref="f3a2ff3766cf45c203dba5a2260445b1" args="(OpalConnection &amp;connection, OpalMediaStream &amp;stream)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PBoolean TelephonyIfc::OnOpenMediaStream           </td>
          <td>(</td>
          <td class="paramtype">OpalConnection &amp;&nbsp;</td>
          <td class="paramname"> <em>connection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OpalMediaStream &amp;&nbsp;</td>
          <td class="paramname"> <em>stream</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Callback invoked when a media stream is opened for reading or playing. 
<p>
Used to detect end of IVR mode. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>connection</em>&nbsp;</td><td>Connection that owns the stream </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>stream</em>&nbsp;</td><td>The stream that has been opened </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="085ab0d59a990bda8b17cb56b1baaeb1"></a><!-- doxytag: member="TelephonyIfc::OnUserInputTone" ref="085ab0d59a990bda8b17cb56b1baaeb1" args="(OpalConnection &amp;connection, char tone, int duration)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TelephonyIfc::OnUserInputTone           </td>
          <td>(</td>
          <td class="paramtype">OpalConnection &amp;&nbsp;</td>
          <td class="paramname"> <em>connection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>tone</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>duration</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Callback invoked when DTMF tone is detected. 
<p>
Tones identified by a key (0-9, *, #). Array of tones holds record of unique tones detected since array was last cleared. This method populates the array of tones. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>connection</em>&nbsp;</td><td>The connection that recieved the tone </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tone</em>&nbsp;</td><td>The tone that was received </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>duration</em>&nbsp;</td><td>of the tone in milliseconds </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="1138529389af3b4712bd11fadd4836ca"></a><!-- doxytag: member="TelephonyIfc::PlayWAV" ref="1138529389af3b4712bd11fadd4836ca" args="(const PString &amp;path, int repeat=0, int delay=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PBoolean TelephonyIfc::PlayWAV           </td>
          <td>(</td>
          <td class="paramtype">const PString &amp;&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>repeat</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>delay</em> = <code>0</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Transmit a WAV file to the remote party. 
<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>You can only play one WAV file at a time. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>WAV file to play </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>repeat</em>&nbsp;</td><td>The number of times to repeat the file </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>delay</em>&nbsp;</td><td>The time in milliseconds to wait between repeated playings of the file </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="ddbfc63168d5e70fd4f83469de4aabb7"></a><!-- doxytag: member="TelephonyIfc::Register" ref="ddbfc63168d5e70fd4f83469de4aabb7" args="(const PString &amp;registrar, const PString &amp;user, const PString &amp;passwd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TelephonyIfc::Register           </td>
          <td>(</td>
          <td class="paramtype">const PString &amp;&nbsp;</td>
          <td class="paramname"> <em>registrar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const PString &amp;&nbsp;</td>
          <td class="paramname"> <em>user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const PString &amp;&nbsp;</td>
          <td class="paramname"> <em>passwd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Register with a service provided. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>registrar</em>&nbsp;</td><td>Address of the registrar (e.g. ekiga.net) </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="ac6179d75a2c623e05ccb345b45741f1"></a><!-- doxytag: member="TelephonyIfc::SendTone" ref="ac6179d75a2c623e05ccb345b45741f1" args="(const char tone)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TelephonyIfc::SendTone           </td>
          <td>(</td>
          <td class="paramtype">const char&nbsp;</td>
          <td class="paramname"> <em>tone</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Send a DTMF tone to the remote party if connected. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tone</em>&nbsp;</td><td>Tone to send </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="2cd8176d99232038fbe8718417135b07"></a><!-- doxytag: member="TelephonyIfc::StartRecording" ref="2cd8176d99232038fbe8718417135b07" args="(const PString &amp;fname)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TelephonyIfc::StartRecording           </td>
          <td>(</td>
          <td class="paramtype">const PString &amp;&nbsp;</td>
          <td class="paramname"> <em>fname</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Begin recording the current call. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fname</em>&nbsp;</td><td>Path to the file where the recording will be saved. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="60cba0b92e2f33357c063c251fae2997"></a><!-- doxytag: member="TelephonyIfc::ToneReceived" ref="60cba0b92e2f33357c063c251fae2997" args="(char key, bool clear=true)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool TelephonyIfc::ToneReceived           </td>
          <td>(</td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>clear</em> = <code>true</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Determines whether a DTMF tone has been received. 
<p>
DTMF tones are queued, this checks queue and clears it by default. Use clear = false to preserve the queue, for example to check for one of multiple keys of interest.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>key</em>&nbsp;</td><td>The DTMF tone (use '1' not 1 if you are looking for the tone that comes from pressing the one key on a phone). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>clear</em>&nbsp;</td><td>Clear all entries in the queue for tone key </td></tr>
  </table>
</dl>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="telephony_8h-source.html">telephony.h</a><li>telephony.cpp</ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Oct 25 21:10:28 2010 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
